---
import Header from "../components/Header.astro";
import Base from "../layouts/Base.astro";
import Footer from "../components/Footer.astro";
import Card from "../components/Card.astro";

import { getOffres } from "../backend.mjs";

const offres = await getOffres();
console.log(offres);

---

<Base titre="Offre">
	<h1 class="text-red-400 font-bold text-8xl m-6 text-center">Offres</h1>

	<div x-data="{ showFavorites: false }">
		<button class="bg-blue-300 p-3 ml-16 border-solid border-2 border-black rounded-md" @click="showFavorites = !showFavorites">
			<span x-show="!showFavorites">Afficher les favoris</span>
			<span x-show="showFavorites">Afficher tout</span>
		</button>

		<div>
			<div class="grid grid-cols-2 gap-5 justify center" x-show="!showFavorites">
				{offres.map((offre) => <Card {...offre} />)}
			</div>
			<div class="grid grid-cols-2 gap-4" x-show="showFavorites">
				{offres.map((offre) => offre.favori && <Card {...offre} />)}
			</div>
		</div>
</Base>